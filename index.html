<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="计算巢是阿里云开放给企业应用服务商的服务管理平台。服务商能够在计算巢上发布私有化部署服务，为其客户提供云上软件一键部署的能力；同时也支持全托管模式的服务，赋能服务商托管其客户资源。">
  <title>WPS文档中心V7-lite服务实例部署文档 - Aliyun 计算巢 x Demo</title>

  <link rel="shortcut icon" href="img/favicon.ico">

  <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
  <link rel="stylesheet" href="css/theme.css">
  

  

  
  

  
    <script src="search/main.js"></script>
  

  

  <script src="js/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body>
  <div class="container">
    <div class="nav">
      <div class="nav-inner">
        <div class="logo">
          <img src="./img/logo-2x.png">
        </div>
        <div class="nav-list">
          <ul>
          
              <li><a href="#wpsv7-lite">WPS文档中心V7-lite服务实例部署文档</a></li>
              
                  <li><a href="#_1">概述</a></li>
                  
              
                  <li><a href="#_2">计费说明</a></li>
                  
              
                  <li><a href="#_3">部署架构</a></li>
                  
              
                  <li><a href="#ram">RAM账号所需权限(推荐直接使用管理员账号创建，无需设置权限)</a></li>
                  
                      <li class="li-h3"><a href="#1ram">1.RAM账户操作计算巢的权限</a></li>
                  
                      <li class="li-h3"><a href="#2ram">2.RAM账户操作资源的权限（建议添加自定义策略）</a></li>
                  
              
                  <li><a href="#_4">部署流程</a></li>
                  
                      <li class="li-h3"><a href="#_5">部署步骤</a></li>
                  
                      <li class="li-h3"><a href="#_6">验证结果</a></li>
                  
                      <li class="li-h3"><a href="#wps">使用WPS文档中心</a></li>
                  
              
                  <li><a href="#_7">问题排查</a></li>
                  
                      <li class="li-h3"><a href="#1">1. 账户和密码以什么形式提供？</a></li>
                  
              
                  <li><a href="#_8">联系我们</a></li>
                  
              
          
          </ul>
        </div>
      </div>
    </div>
    <div class="content theme-github">
      
      <div class="content-inner">        
        
        <h1 id="wpsv7-lite">WPS文档中心V7-lite服务实例部署文档</h1>
<h2 id="_1">概述</h2>
<p>金山软件文档中心lite服务（自动创建RDS数据库与OSS对象存储）,本产品用于在线管理云文档，支持多人在线文档预览编辑。</p>
<p>支持在计算巢平台上一键基于WPS免维护版本服务创建可直接投产的整套环境（包括rds和oss）。</p>
<h2 id="_2">计费说明</h2>
<p>WPS服务在计算巢上的费用主要涉及：</p>
<ul>
<li>所选vCPU与内存规格</li>
<li>系统盘类型及容量</li>
<li>公网带宽</li>
</ul>
<p>计费方式包括：</p>
<ul>
<li>按量付费（小时）</li>
<li>包年包月</li>
</ul>
<p>目前支持8核32G及以上规格的实例（请根据实际并发用户数需要提高规格），例如：</p>
<table>
<thead>
<tr>
<th>规格族</th>
<th>vCPU与内存</th>
<th>系统盘</th>
<th>公网带宽</th>
</tr>
</thead>
<tbody>
<tr>
<td>ecs.g6.2xlarge</td>
<td>通用型 g6，8vCPU 32GiB</td>
<td>ESSD云盘 200GiB及以上系统盘 250GiB及以上数据盘</td>
<td>建议带宽10Mbps及以上</td>
</tr>
<tr>
<td>ecs.g6.4xlarge</td>
<td>通用型 g6，16vCPU 64GiB</td>
<td>ESSD云盘 200GiB及以上系统盘 500GiB及以上数据盘</td>
<td>建议带宽10Mbps及以上</td>
</tr>
</tbody>
</table>
<p>预估费用在创建实例时可实时看到。</p>
<h2 id="_3">部署架构</h2>
<p>本方案目前仅需一台ECS主机提供服务，如需更多规格、其他服务（如集群高可用性要求、企业级支持服务等），请联系我们 <a href="mailto:https://www.wps.cn">mailto:https://www.wps.cn</a>。</p>
<h2 id="ram">RAM账号所需权限(推荐直接使用管理员账号创建，无需设置权限)</h2>
<p>WPS服务需要对ECS、VPC、RDS、OSS等资源进行访问和创建操作，若您使用RAM用户创建服务实例，需要在创建服务实例前，对使用的RAM用户的账号添加相应资源的权限。添加RAM权限的详细操作，请参见<a href="https://help.aliyun.com/document_detail/121945.html">为RAM用户授权</a>。所需权限如下表所示。</p>
<h3 id="1ram">1.RAM账户操作计算巢的权限</h3>
<pre><code>AliyunComputeNestUserFullAccess
AliyunComputeNestSupplierFullAccess
AliyunRAMReadOnlyAccess
AliyunVPCReadOnlyAccess
AliyunECSReadOnlyAccess
AliyunROSFullAccess
AliyunQuotasReadOnlyAccess
</code></pre>
<h3 id="2ram">2.RAM账户操作资源的权限（建议添加自定义策略）</h3>
<pre><code>{
    &quot;Statement&quot;: [
        {
            &quot;Action&quot;: [
                &quot;ecs:AddTags&quot;,
                &quot;ecs:AllocatePublicIpAddress&quot;,
                &quot;ecs:AttachKeyPair&quot;,
                &quot;ecs:AuthorizeSecurityGroup&quot;,
                &quot;ecs:AuthorizeSecurityGroupEgress&quot;,
                &quot;ecs:ConfigureSecurityGroupPermissions&quot;,
                &quot;ecs:CreateSecurityGroup&quot;,
                &quot;ecs:DeleteInstance&quot;,
                &quot;ecs:DeleteSecurityGroup&quot;,
                &quot;ecs:DescribeAvailableResource&quot;,
                &quot;ecs:DescribeCloudAssistantStatus&quot;,
                &quot;ecs:DescribeDedicatedHosts&quot;,
                &quot;ecs:DescribeDisks&quot;,
                &quot;ecs:DescribeImageSupportInstanceTypes&quot;,
                &quot;ecs:DescribeImages&quot;,
                &quot;ecs:DescribeInstanceAutoRenewAttribute&quot;,
                &quot;ecs:DescribeInstanceRamRole&quot;,
                &quot;ecs:DescribeInstances&quot;,
                &quot;ecs:DescribeInvocationResults&quot;,
                &quot;ecs:DescribeInvocations&quot;,
                &quot;ecs:DescribeKeyPairs&quot;,
                &quot;ecs:DescribeManagedInstances&quot;,
                &quot;ecs:DescribeNetworkInterfaces&quot;,
                &quot;ecs:DescribePrice&quot;,
                &quot;ecs:DescribeSecurityGroupAttribute&quot;,
                &quot;ecs:DescribeSecurityGroups&quot;,
                &quot;ecs:DescribeSnapshots&quot;,
                &quot;ecs:DescribeUserData&quot;,
                &quot;ecs:DetachKeyPair&quot;,
                &quot;ecs:JoinResourceGroup&quot;,
                &quot;ecs:ModifyDiskSpec&quot;,
                &quot;ecs:ModifyInstanceAttribute&quot;,
                &quot;ecs:ModifySecurityGroupEgressRule&quot;,
                &quot;ecs:ModifySecurityGroupRule&quot;,
                &quot;ecs:RemoveTags&quot;,
                &quot;ecs:ReplaceSystemDisk&quot;,
                &quot;ecs:ResizeDisk&quot;,
                &quot;ecs:RunCommand&quot;,
                &quot;ecs:RunInstances&quot;,
                &quot;ecs:StartInstance&quot;,
                &quot;ecs:StopInstance&quot;,
                &quot;ecs:StopInvocation&quot;,
                &quot;ecs:TagResources&quot;,
                &quot;ecs:UntagResources&quot;,
                &quot;ecs:ModifyDiskAttribute&quot;,
                &quot;ecs:CreateSnapshot&quot;,
                &quot;ecs:CreateImage&quot;,
                &quot;ecs:DeleteSnapshot&quot;,
                &quot;ecs:DeleteImage&quot;
                &quot;ecs:AttachInstanceRAMRole&quot;,
                &quot;vpc:AssociateVpcCidrBlock&quot;,
                &quot;vpc:CreateVSwitch&quot;,
                &quot;vpc:CreateVpc&quot;,
                &quot;vpc:DeleteVSwitch&quot;,
                &quot;vpc:DeleteVpc&quot;,
                &quot;vpc:DescribeVSwitches&quot;,
                &quot;vpc:DescribeVpcs&quot;,
                &quot;vpc:DescribeVpnGateways&quot;,
                &quot;vpc:DescribeZones&quot;,
                &quot;vpc:ModifyVSwitchAttribute&quot;,
                &quot;vpc:ModifyVpcAttribute&quot;,
                &quot;vpc:TagResources&quot;,
                &quot;vpc:UnTagResources&quot;,
                &quot;rds:DescribeDBInstances&quot;,
                &quot;slb:DescribeLoadBalancers&quot;,
                &quot;rds:AllocateInstancePublicConnection&quot;,
                &quot;rds:CreateAccount&quot;,
                &quot;rds:CreateDBInstance&quot;,
                &quot;rds:CreateDatabase&quot;,
                &quot;rds:DeleteAccount&quot;,
                &quot;rds:DeleteDBInstance&quot;,
                &quot;rds:DescribeAccounts&quot;,
                &quot;rds:DescribeAvailableInstanceClass&quot;,
                &quot;rds:DescribeAvailableResource&quot;,
                &quot;rds:DescribeBackupPolicy&quot;,
                &quot;rds:DescribeClassList&quot;,
                &quot;rds:DescribeDBInstanceAttribute&quot;,
                &quot;rds:DescribeDBInstanceIPArrayList&quot;,
                &quot;rds:DescribeDBInstanceNetInfo&quot;,
                &quot;rds:DescribeDBInstanceSSL&quot;,
                &quot;rds:DescribeDBInstances&quot;,
                &quot;rds:DescribeDatabases&quot;,
                &quot;rds:DescribeInstanceKeywords&quot;,
                &quot;rds:DescribeRegions&quot;,
                &quot;rds:DescribeSQLCollectorPolicy&quot;,
                &quot;rds:DescribeSecurityGroupConfiguration&quot;,
                &quot;rds:DescribeTags&quot;,
                &quot;rds:GrantAccountPrivilege&quot;,
                &quot;rds:ListTagResources&quot;,
                &quot;rds:ModifyBackupPolicy&quot;,
                &quot;rds:ModifyDBInstanceConnectionString&quot;,
                &quot;rds:ModifyDBInstanceMaintainTime&quot;,
                &quot;rds:ModifyDBInstanceSSL&quot;,
                &quot;rds:ModifyDBInstanceSpec&quot;,
                &quot;rds:ModifySQLCollectorPolicy&quot;,
                &quot;rds:ModifySecurityGroupConfiguration&quot;,
                &quot;rds:ModifySecurityIps&quot;,
                &quot;rds:QueryPrice&quot;,
                &quot;rds:ResetAccountPassword&quot;,
                &quot;rds:TagResources&quot;,
                &quot;rds:UntagResources&quot;,
                &quot;ram:AttachPolicyToRole&quot;,
                &quot;ram:CreatePolicy&quot;,
                &quot;ram:CreateRole&quot;,
                &quot;ram:DeletePolicy&quot;,
                &quot;ram:DeleteRole&quot;,
                &quot;ram:DetachPolicyFromRole&quot;,
                &quot;ram:GetPolicy&quot;,
                &quot;ram:GetRole&quot;,
                &quot;ram:ListPoliciesForRole&quot;,
                &quot;ram:UpdateRole&quot;,
                &quot;oss:DeleteBucket&quot;,
                &quot;oss:DeleteBucketEncryption&quot;,
                &quot;oss:DeleteBucketTagging&quot;,
                &quot;oss:DeleteObject&quot;,
                &quot;oss:GetBucketAcl&quot;,
                &quot;oss:GetBucketCors&quot;,
                &quot;oss:GetBucketInfo&quot;,
                &quot;oss:GetBucketLifecycle&quot;,
                &quot;oss:GetBucketLogging&quot;,
                &quot;oss:GetBucketPolicy&quot;,
                &quot;oss:GetBucketReferer&quot;,
                &quot;oss:GetBucketTagging&quot;,
                &quot;oss:GetBucketVersioning&quot;,
                &quot;oss:GetBucketWebsite&quot;,
                &quot;oss:ListObjects&quot;,
                &quot;oss:PutBucket&quot;,
                &quot;oss:PutBucketAcl&quot;,
                &quot;oss:PutBucketCors&quot;,
                &quot;oss:PutBucketEncryption&quot;,
                &quot;oss:PutBucketLifecycle&quot;,
                &quot;oss:PutBucketLogging&quot;,
                &quot;oss:PutBucketPolicy&quot;,
                &quot;oss:PutBucketReferer&quot;,
                &quot;oss:PutBucketTagging&quot;,
                &quot;oss:PutBucketVersioning&quot;,
                &quot;oss:PutBucketWebsite&quot;,
                &quot;oss:ListBuckets&quot;,
                &quot;ram:CreateAccessKey&quot;,
                &quot;ram:PassRole&quot;,
                &quot;ram:AssumeRole&quot;
            ],
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: &quot;*&quot;
        },
        {
            &quot;Action&quot;: &quot;quotas:ListProductQuotas&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: &quot;*&quot;
        },
        {
            &quot;Action&quot;: &quot;ram:GetRole&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: &quot;*&quot;
        },
        {
            &quot;Action&quot;: [
                &quot;vpc:DescribeVSwitches&quot;,
                &quot;vpc:DescribeVpcs&quot;
            ],
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: &quot;*&quot;
        },
        {
            &quot;Action&quot;: [
                &quot;ros:CreateStack&quot;,
                &quot;ros:GetStack&quot;
            ],
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: &quot;*&quot;
        },
        {
            &quot;Action&quot;: &quot;oss:*&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: &quot;acs:oss:*:*:wps-dc-lite-*&quot;
        }
    ],
    &quot;Version&quot;: &quot;1&quot;
}
</code></pre>
<h2 id="_4">部署流程</h2>
<h3 id="_5">部署步骤</h3>
<h4 id="1-wps">1. 搜索查找wps免维护版计算巢服务</h4>
<p>在我的服务清单中直接使用，上线后需要在服务市场中查找</p>
<h4 id="2">2. 配置并执行创建服务</h4>
<p>点击【正式创建】后配置如下内容：</p>
<ul>
<li>
<p>配置区域和付费模式</p>
<ul>
<li>目前主要支持阿里云国内地域。</li>
</ul>
</li>
<li>
<p>配置ECS主机（请选择8c32g及以上配置）</p>
<ul>
<li>请至少选择8c32g及以上配置</li>
<li>请保存好设置的root密码</li>
<li>数据磁盘请尽量给大一点，后续扩容不方便</li>
</ul>
</li>
<li>
<p>配置可用区以及VPC（默认自动创建）</p>
</li>
<li>
<p>配置RDS数据库</p>
</li>
<li>
<p>配置OSS信息</p>
<ul>
<li>自动创建bucket</li>
<li>名称将为“服务实例名称-填写的后缀”，例如wps-dc-lite-upbk-bucket1）</li>
</ul>
</li>
</ul>
<h3 id="_6">验证结果</h3>
<ul>
<li>
<p>创建成功后查看服务状态</p>
<ul>
<li>确认部署成功后机器会自动重启继续完成初始化（重新注册RDS数据库和OSS）</li>
<li>控制台显示服务已准备好的终端界面后初始化才成功</li>
</ul>
</li>
<li>
<p>获取访问信息</p>
<ul>
<li>使用public ip通过ssh工具登录节点，root账户密码为上面设置的ECS主机信息中的密码；</li>
</ul>
</li>
<li>
<p>确认结果并清理敏感信息</p>
<ul>
<li>确认服务均正常后，请删除/data/.aliyun_info.bak文件，里面记录了rds和oss信息用户初始化过程。</li>
</ul>
</li>
</ul>
<h3 id="wps">使用WPS文档中心</h3>
<p>请访问WPS官网了解如何使用：<a href="https://www.wps.cn">使用文档</a></p>
<h2 id="_7">问题排查</h2>
<h3 id="1">1. 账户和密码以什么形式提供？</h3>
<p>目前要获取默认账户密码，只能ssh登陆节点，执行命令打印/tmp/platforminfo文件内容获取。</p>
<pre><code>cat /tmp/platforminfo
</code></pre>
<p>其中登录ip为阿里云提供的public ip地址，root账户密码为创建服务时配置ecs主机处输入的密码；</p>
<p>请及时登陆并修改默认密码：
- 请使用"v7文档中心管理后台"栏目的admin账户和默认密码登陆云文档服务
- 请使用"运维平台/部署平台"栏目中的wpsadmin账户和默认密码登陆运维平台</p>
<h2 id="_8">联系我们</h2>
<p>欢迎访问WPS官网（<a href="https://www.wps.cn">https://www.wps.cn</a>）了解更多信息。</p>
<p>联系邮箱：<a href="mailto:https://www.wps.cn">https://www.wps.cn</a></p>
        
      </div>

      <div class="copyrights">© 2009-2022 Aliyun.com 版权所有</div>
    </div>
  </div>
  
  <!--
  MkDocs version      : 1.5.3
  Docs Build Date UTC : 2024-02-22 01:10:01.729139+00:00
  -->
</body>
</html>